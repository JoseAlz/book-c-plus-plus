<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Returning a Reference</title><link href="navigation.css" rel="stylesheet" type="text/css"/><link href="document.css" rel="stylesheet" type="text/css"/></head><body><p class="top_nav"><a href="part264.htm">&lt; Previous</a><span> | </span><a href="../Beginning_Cpp_Through_Game_Programming.html">Contents</a><span> | </span><a href="part266.htm">Next &gt;</a></p><p style="padding-top: 2pt;padding-left: 41pt;text-indent: 0pt;text-align: left;"><h1 href="#bookmark9">Returning a Reference</h1></p><p style="padding-top: 3pt;padding-left: 41pt;text-indent: 0pt;line-height: 106%;text-align: left;">Before you can return a reference from a function, you must specify that you<span class="s12">’</span>re returning one. That<span class="s12">’</span>s what I do in the <span class="s35">refToElement() </span>function header.</p><p class="s35" style="padding-top: 5pt;padding-left: 41pt;text-indent: 0pt;text-align: left;">string&amp; refToElement(vector&lt;string&gt;&amp; inventory, int i)</p><p class="s19" style="padding-top: 2pt;text-indent: 0pt;text-align: right;"><a name="bookmark764">Returning References 201</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 41pt;text-indent: 0pt;line-height: 107%;text-align: justify;">By using the reference operator in <span class="s35">string&amp; </span>when I specify the return type, I<span class="s12">’</span>m saying that the function will return a reference to a <span class="s35">string </span>object (not a <span class="s35">string </span>object itself). You can use the reference operator like I did to specify that a function returns a reference to an object of a particular type. Simply put the reference operator after the type name.</p><p style="padding-top: 5pt;padding-left: 41pt;text-indent: 0pt;line-height: 106%;text-align: justify;">The body of the function <span class="s35">refToElement() </span>contains only one statement, which returns a reference to the element at position <span class="s35">i </span>in the vector.</p><p class="s35" style="padding-top: 5pt;padding-left: 62pt;text-indent: 0pt;text-align: left;">return vec[i];</p><p style="padding-top: 5pt;padding-left: 41pt;text-indent: 0pt;line-height: 106%;text-align: justify;"><a name="bookmark709">Notice that there</a><span class="s12">’</span>s nothing in the <span class="s35">return </span>statement to indicate that the function returns a reference. The function header and prototype determine whether a function returns an object or a reference to an object.<a name="bookmark765">&zwnj;</a></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s24" style="padding-top: 10pt;padding-left: 41pt;text-indent: 0pt;text-align: left;">Tra p</p><p style="padding-left: 41pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="517" height="1" alt="image" src="Image_248.png"/></span></p><p class="s19" style="padding-top: 5pt;padding-left: 59pt;text-indent: 0pt;text-align: justify;">Although returning a reference can be an efficient way to send information back to a calling function, you have to be careful not to return a reference to an out-of-scope object—an object that ceases to exist. For example, the following function returns a reference to a <span class="s35">string </span>object that no longer exists after the function ends—and that’s illegal.</p><p class="s35" style="padding-top: 5pt;padding-left: 59pt;text-indent: 0pt;text-align: left;">string&amp; badReference()</p><p class="s35" style="padding-top: 2pt;padding-left: 59pt;text-indent: 0pt;text-align: left;">{</p><p class="s35" style="padding-top: 2pt;padding-left: 79pt;text-indent: 0pt;line-height: 118%;text-align: left;">string local = &quot;This string will cease to exist once the function ends.&quot;; return local;</p><p class="s35" style="padding-left: 59pt;text-indent: 0pt;text-align: left;">}</p><p class="s19" style="padding-top: 4pt;padding-bottom: 4pt;padding-left: 59pt;text-indent: 0pt;text-align: left;">One way to avoid this type of problem is to never return a reference to a local variable.</p><p style="padding-left: 59pt;text-indent: 0pt;line-height: 2pt;text-align: left;"><span><img width="498" height="3" alt="image" src="Image_249.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="nav">&nbsp;&nbsp;</p><p class="nav">&nbsp;</p><p class="nav"><a href="part264.htm">&lt; Previous</a><span> | </span><a href="../Beginning_Cpp_Through_Game_Programming.html">Contents</a><span> | </span><a href="part266.htm">Next &gt;</a></p><p class="nav">&nbsp;&nbsp;</p></body></html>
